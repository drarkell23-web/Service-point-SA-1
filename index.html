<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>ServicePoint SA</title>

<style>
    :root {
        --bg-page: #031b10;
        --bg-shell: #052618;
        --bg-hero: #054527;
        --bg-sidebar: #06331f;
        --bg-card: #073320;
        --bg-card-soft: #0a3d26;
        --accent: #28d17c;
        --accent-soft: rgba(40, 209, 124, 0.1);
        --text-main: #f5fff8;
        --text-muted: #a7c9b3;
        --border-soft: rgba(255, 255, 255, 0.06);
        --shadow-soft: 0 18px 45px rgba(0, 0, 0, 0.65);
        --radius-lg: 18px;
        --radius-md: 12px;
        --radius-pill: 999px;
    }

    * {
        box-sizing: border-box;
        margin: 0;
        padding: 0;
    }

    body {
        margin: 0;
        font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI",
            sans-serif;
        background: radial-gradient(circle at top, #06311f 0, #020f09 55%, #000 100%);
        color: var(--text-main);
    }

    /* ========= TOP BAR ========= */
    .topbar {
        max-width: 1200px;
        margin: 18px auto 10px auto;
        padding: 14px 18px;
        border-radius: var(--radius-lg);
        background: rgba(3, 25, 16, 0.9);
        border: 1px solid var(--border-soft);
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: 18px;
        box-shadow: 0 10px 35px rgba(0, 0, 0, 0.7);
    }

    .brand-wrap {
        display: flex;
        align-items: center;
        gap: 10px;
    }

    .brand-logo {
        width: 34px;
        height: 34px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        background: radial-gradient(circle at 20% 0, #28d17c, #0a7d46);
        color: #02140b;
        font-weight: 800;
        font-size: 18px;
    }

    .brand-text-main {
        font-weight: 700;
        letter-spacing: 0.02em;
        font-size: 18px;
    }

    .brand-text-sub {
        font-size: 12px;
        color: var(--text-muted);
    }

    .top-pills {
        display: flex;
        gap: 10px;
        flex-wrap: wrap;
        justify-content: flex-end;
    }

    .pill {
        padding: 8px 14px;
        border-radius: var(--radius-pill);
        font-size: 12px;
        border: 1px solid rgba(255, 255, 255, 0.12);
        color: var(--text-muted);
        display: inline-flex;
        align-items: center;
        gap: 6px;
        background: rgba(7, 46, 30, 0.85);
        backdrop-filter: blur(14px);
    }

    .pill-dot {
        width: 6px;
        height: 6px;
        border-radius: 50%;
        background: var(--accent);
    }

    .pill-accent {
        background: var(--accent-soft);
        color: #d9ffe8;
        border-color: transparent;
    }

    /* ========= LAYOUT ========= */
    .layout {
        max-width: 1200px;
        margin: 0 auto 40px auto;
        display: grid;
        grid-template-columns: 270px minmax(0, 1fr);
        gap: 18px;
        align-items: flex-start;
    }

    /* ========= SIDEBAR ========= */
    .sidebar {
        background: var(--bg-sidebar);
        border-radius: var(--radius-lg);
        padding: 18px 14px;
        border: 1px solid var(--border-soft);
        box-shadow: var(--shadow-soft);
        display: flex;
        flex-direction: column;
        min-height: 480px;

        /* sticky */
        position: sticky;
        top: 18px;
        max-height: calc(100vh - 36px);
    }

    .sidebar-header {
        font-size: 13px;
        color: var(--text-muted);
        margin-bottom: 10px;
        line-height: 1.5;
    }

    /* ==== SERVICE SEARCH (AUTO-COMPLETE) ==== */
    .service-search {
        margin-bottom: 12px;
    }

    .service-search-input {
        width: 100%;
        padding: 7px 9px;
        border-radius: 999px;
        border: 1px solid rgba(255, 255, 255, 0.18);
        background: rgba(3, 25, 16, 0.95);
        color: var(--text-main);
        font-size: 11px;
        outline: none;
    }

    .service-search-input::placeholder {
        color: rgba(199, 235, 215, 0.6);
    }

    .search-results {
        margin-top: 4px;
        max-height: 180px;
        overflow-y: auto;
        border-radius: 12px;
        background: rgba(1, 10, 6, 0.96);
        border: 1px solid rgba(255, 255, 255, 0.12);
        display: none;
    }

    .search-result-item {
        padding: 6px 8px;
        font-size: 11px;
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: 6px;
        transition: background 0.15s ease;
    }

    .search-result-item span.label {
        color: #e9fff4;
    }

    .search-result-item span.cat {
        color: var(--text-muted);
        font-size: 10px;
    }

    .search-result-item:hover {
        background: rgba(40, 209, 124, 0.14);
    }

    .scroll-area {
        flex: 1;
        overflow-y: auto;
        padding-right: 4px;
    }

    .scroll-area::-webkit-scrollbar {
        width: 5px;
    }
    .scroll-area::-webkit-scrollbar-thumb {
        background: rgba(255, 255, 255, 0.2);
        border-radius: 999px;
    }

    .category {
        margin-bottom: 6px;
        border-radius: 10px;
        overflow: hidden;
    }

    .category-header {
        cursor: pointer;
        padding: 9px 9px;
        display: flex;
        align-items: center;
        justify-content: space-between;
        background: rgba(255, 255, 255, 0.02);
        border-radius: 10px;
        transition: background 0.18s ease, transform 0.12s ease;
    }

    .category-header:hover {
        background: rgba(255, 255, 255, 0.06);
        transform: translateY(-1px);
    }

    .category-title {
        font-size: 13px;
        display: flex;
        align-items: center;
        gap: 8px;
    }

    .category-icon {
        width: 10px;
        height: 10px;
        border-radius: 4px;
        background: radial-gradient(circle at 0 0, #28d17c, #0b7a46);
        box-shadow: 0 0 8px rgba(40, 209, 124, 0.5);
        animation: pulseIcon 2.4s infinite ease-in-out;
    }

    @keyframes pulseIcon {
        0%, 100% { transform: scale(1); opacity: 0.9; }
        50% { transform: scale(1.15); opacity: 1; }
    }

    .category-count {
        font-size: 11px;
        color: var(--text-muted);
    }

    .category-arrow {
        font-size: 11px;
        color: var(--text-muted);
    }

    .service-list {
        display: none;
        padding: 6px 7px 8px 10px;
        border-radius: 10px;
        margin-top: 4px;
        background: rgba(255, 255, 255, 0.02);
    }

    .service-item {
        font-size: 11px;
        color: #d3ffe7;
        padding: 5px 8px;
        border-radius: 999px;
        cursor: pointer;
        margin-bottom: 4px;
        border: 1px solid transparent;
        background: transparent;
        transition: background 0.18s ease, transform 0.12s ease,
            border-color 0.18s ease;
        display: inline-flex;
        align-items: center;
        gap: 6px;
    }

    .service-dot {
        width: 6px;
        height: 6px;
        border-radius: 50%;
        background: rgba(40, 209, 124, 0.7);
        box-shadow: 0 0 10px rgba(40, 209, 124, 0.7);
    }

    .service-item:hover {
        background: rgba(6, 110, 63, 0.8);
        border-color: rgba(40, 209, 124, 0.4);
        transform: translateY(-1px);
    }

    .sidebar-footer {
        margin-top: 10px;
        font-size: 11px;
        color: var(--text-muted);
    }

    /* ========= MAIN CONTENT ========= */
    .content {
        display: flex;
        flex-direction: column;
        gap: 14px;
    }

    .hero-card {
        background: var(--bg-hero);
        border-radius: var(--radius-lg);
        border: 1px solid var(--border-soft);
        padding: 24px 24px 20px 24px;
        display: grid;
        grid-template-columns: minmax(0, 1.3fr) minmax(0, 1.1fr);
        gap: 20px;
        box-shadow: var(--shadow-soft);
    }

    .hero-eyebrow {
        font-size: 11px;
        text-transform: uppercase;
        letter-spacing: 0.1em;
        color: var(--text-muted);
        margin-bottom: 6px;
    }

    .hero-title {
        font-size: 26px;
        line-height: 1.3;
        font-weight: 700;
        margin-bottom: 8px;
    }

    .hero-sub {
        font-size: 13px;
        color: var(--text-muted);
        max-width: 480px;
        margin-bottom: 18px;
    }

    .region-chips {
        display: flex;
        flex-wrap: wrap;
        gap: 8px;
        margin-bottom: 18px;
    }

    .chip {
        padding: 8px 12px;
        border-radius: var(--radius-pill);
        border: 1px solid rgba(255, 255, 255, 0.16);
        font-size: 11px;
        color: var(--text-main);
        background: rgba(7, 58, 36, 0.9);
        display: inline-flex;
        align-items: center;
        gap: 6px;
        cursor: default;
    }

    .chip-dot {
        width: 7px;
        height: 7px;
        border-radius: 50%;
        background: var(--accent);
    }

    .hero-meta {
        font-size: 11px;
        color: var(--text-muted);
        display: flex;
        gap: 18px;
        flex-wrap: wrap;
    }

    .hero-right {
        display: flex;
        flex-direction: column;
        justify-content: space-between;
        gap: 16px;
    }

    .hero-right-text {
        font-size: 13px;
        color: var(--text-muted);
        line-height: 1.5;
    }

    .hero-right-cta {
        display: flex;
        flex-wrap: wrap;
        gap: 10px;
        align-items: center;
    }

    .btn-primary {
        padding: 10px 20px;
        border-radius: var(--radius-pill);
        border: none;
        outline: none;
        background: linear-gradient(135deg, #28d17c, #19a35c);
        color: #02140b;
        font-size: 13px;
        font-weight: 600;
        cursor: pointer;
        box-shadow: 0 14px 30px rgba(24, 199, 107, 0.6);
        transition: transform 0.12s ease, box-shadow 0.12s ease,
            filter 0.12s ease;
    }

    .btn-primary:hover {
        transform: translateY(-1px);
        filter: brightness(1.06);
        box-shadow: 0 18px 40px rgba(24, 199, 107, 0.8);
    }

    .btn-ghost {
        padding: 9px 16px;
        border-radius: var(--radius-pill);
        border: 1px dashed rgba(255, 255, 255, 0.3);
        background: transparent;
        color: var(--text-main);
        font-size: 12px;
        cursor: pointer;
        transition: background 0.18s ease, border-color 0.18s ease,
            color 0.18s ease;
    }

    .btn-ghost:hover {
        background: rgba(255, 255, 255, 0.06);
        border-color: rgba(40, 209, 124, 0.7);
    }

    .assistant-tag {
        font-size: 11px;
        color: var(--text-muted);
        display: flex;
        align-items: center;
        gap: 6px;
    }

    .assistant-avatar {
        width: 20px;
        height: 20px;
        border-radius: 999px;
        background: radial-gradient(circle at 0 0, #fed7aa, #fb7185);
        border: 1px solid rgba(255, 255, 255, 0.3);
    }

    /* ========= EMERGENCY QUICK ROW ========= */
    .emergency-row {
        margin-top: 6px;
        background: var(--bg-card);
        border-radius: var(--radius-lg);
        border: 1px solid var(--border-soft);
        padding: 10px 14px;
        display: flex;
        flex-wrap: wrap;
        align-items: center;
        gap: 8px;
        font-size: 11px;
    }

    .emergency-label {
        color: var(--text-muted);
        margin-right: 4px;
    }

    .emergency-chip {
        padding: 7px 10px;
        border-radius: var(--radius-pill);
        border: 1px solid rgba(255, 255, 255, 0.18);
        font-size: 11px;
        background: rgba(138, 23, 23, 0.18);
        color: #ffecec;
        cursor: pointer;
        display: inline-flex;
        align-items: center;
        gap: 6px;
    }

    .emergency-chip span.icon {
        font-size: 12px;
    }

    .emergency-chip:hover {
        background: rgba(214, 32, 32, 0.3);
    }

    /* ========= STATS ========= */
    .stats-row {
        display: grid;
        grid-template-columns: repeat(3, minmax(0, 1fr));
        gap: 10px;
    }

    .stat-card {
        background: var(--bg-card);
        border-radius: var(--radius-md);
        padding: 14px 14px 12px 14px;
        border: 1px solid var(--border-soft);
        box-shadow: 0 12px 28px rgba(0, 0, 0, 0.7);
    }

    .stat-label {
        font-size: 11px;
        color: var(--text-muted);
        margin-bottom: 6px;
    }

    .stat-value {
        font-size: 22px;
        font-weight: 700;
        margin-bottom: 4px;
    }

    .stat-foot {
        font-size: 11px;
        color: var(--text-muted);
    }

    /* Extra KPI row */
    .kpi-row {
        margin-top: 6px;
    }

    /* ========= WHY CHOOSE ========= */
    .why-card {
        margin-top: 10px;
        background: var(--bg-card-soft);
        border-radius: var(--radius-lg);
        border: 1px solid var(--border-soft);
        padding: 18px 18px 16px 18px;
        display: grid;
        grid-template-columns: minmax(0, 1.5fr) minmax(0, 1.1fr);
        gap: 18px;
    }

    .why-title {
        font-size: 15px;
        margin-bottom: 8px;
    }

    .why-list {
        font-size: 12px;
        color: var(--text-muted);
        list-style: none;
    }

    .why-list li {
        margin-bottom: 6px;
        display: flex;
        gap: 6px;
    }

    .why-bullet {
        color: var(--accent);
        font-size: 14px;
        margin-top: -2px;
    }

    .why-foot {
        font-size: 11px;
        color: var(--text-muted);
        margin-top: 10px;
    }

    /* ========= CONTRACTOR CARDS ========= */
    .contractors-section {
        margin-top: 12px;
        background: var(--bg-card);
        border-radius: var(--radius-lg);
        border: 1px solid var(--border-soft);
        padding: 16px 16px 14px 16px;
        box-shadow: var(--shadow-soft);
    }

    .section-heading {
        font-size: 15px;
        margin-bottom: 4px;
    }

    .section-sub {
        font-size: 11px;
        color: var(--text-muted);
        margin-bottom: 10px;
    }

    .contractor-grid {
        display: grid;
        grid-template-columns: repeat(3, minmax(0, 1fr));
        gap: 10px;
    }

    .contractor-card {
        background: #042016;
        border-radius: 14px;
        padding: 10px 10px 9px 10px;
        border: 1px solid rgba(255, 255, 255, 0.12);
        font-size: 11px;
    }

    .contractor-name {
        font-weight: 600;
        margin-bottom: 2px;
    }

    .contractor-meta {
        color: var(--text-muted);
        margin-bottom: 4px;
    }

    .contractor-tags {
        display: flex;
        flex-wrap: wrap;
        gap: 4px;
        margin-bottom: 6px;
    }

    .contractor-tag {
        padding: 3px 7px;
        border-radius: 999px;
        border: 1px solid rgba(255, 255, 255, 0.14);
        font-size: 10px;
        color: #e3fff0;
    }

    .contractor-btn {
        padding: 6px 9px;
        border-radius: 999px;
        border: none;
        font-size: 11px;
        background: linear-gradient(135deg, #28d17c, #19a35c);
        color: #02140b;
        cursor: pointer;
        width: 100%;
    }

    /* ========= REVIEWS ========= */
    .reviews-section {
        margin-top: 12px;
        background: var(--bg-card-soft);
        border-radius: var(--radius-lg);
        border: 1px solid var(--border-soft);
        padding: 14px 16px 12px 16px;
    }

    .reviews-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        gap: 8px;
        margin-bottom: 6px;
    }

    .reviews-carousel {
        position: relative;
        min-height: 70px;
    }

    .review-text {
        font-size: 11px;
        color: var(--text-muted);
        margin-bottom: 4px;
    }

    .review-meta {
        font-size: 11px;
        color: #e7fff5;
    }

    .review-stars {
        color: #facc15;
        font-size: 11px;
        margin-right: 4px;
    }

    .review-nav {
        display: flex;
        gap: 4px;
    }

    .review-btn {
        width: 20px;
        height: 20px;
        border-radius: 999px;
        border: 1px solid rgba(255, 255, 255, 0.2);
        background: transparent;
        color: #e5fff5;
        font-size: 11px;
        cursor: pointer;
    }

    /* ========= POPUP ========= */
    .popup-bg {
        position: fixed;
        inset: 0;
        background: rgba(0, 0, 0, 0.75);
        display: none;
        justify-content: center;
        align-items: center;
        z-index: 50;
    }

    .popup-box {
        width: 360px;
        max-width: 92vw;
        background: #041e13;
        border-radius: 18px;
        border: 1px solid rgba(255, 255, 255, 0.15);
        padding: 18px 18px 16px 18px;
        box-shadow: 0 24px 60px rgba(0, 0, 0, 0.9);
    }

    .popup-title {
        font-size: 15px;
        margin-bottom: 4px;
    }

    .popup-sub {
        font-size: 11px;
        color: var(--text-muted);
        margin-bottom: 10px;
    }

    .popup-selected {
        font-size: 12px;
        padding: 6px 10px;
        border-radius: 999px;
        background: rgba(40, 209, 124, 0.1);
        color: #d6ffe7;
        margin-bottom: 10px;
        display: inline-flex;
        align-items: center;
        gap: 8px;
    }

    .popup-selected span.tag {
        width: 8px;
        height: 8px;
        border-radius: 50%;
        background: var(--accent);
    }

    .popup-input {
        width: 100%;
        padding: 10px 10px;
        border-radius: 10px;
        border: 1px solid rgba(255, 255, 255, 0.18);
        background: rgba(5, 31, 19, 0.9);
        color: var(--text-main);
        font-size: 12px;
        margin-bottom: 8px;
    }

    .popup-input::placeholder {
        color: rgba(199, 235, 215, 0.6);
    }

    .popup-row {
        display: flex;
        justify-content: flex-end;
        gap: 8px;
        margin-top: 6px;
    }

    .btn-secondary {
        padding: 8px 14px;
        border-radius: var(--radius-pill);
        border: 1px solid rgba(255, 255, 255, 0.25);
        background: transparent;
        color: var(--text-main);
        font-size: 12px;
        cursor: pointer;
        transition: background 0.16s ease, border-color 0.16s ease;
    }

    .btn-secondary:hover {
        background: rgba(255, 255, 255, 0.08);
        border-color: rgba(255, 255, 255, 0.4);
    }

    .popup-footnote {
        margin-top: 8px;
        font-size: 10px;
        color: var(--text-muted);
    }

    /* ========= PROGRESS TRACKER ========= */
    .progress-tracker {
        position: fixed;
        left: 50%;
        transform: translateX(-50%);
        bottom: 18px;
        background: #041e13;
        border-radius: 999px;
        border: 1px solid rgba(255, 255, 255, 0.18);
        padding: 8px 14px;
        display: none;
        align-items: center;
        gap: 10px;
        font-size: 11px;
        z-index: 60;
        box-shadow: 0 18px 40px rgba(0, 0, 0, 0.8);
    }

    .progress-step-wrap {
        display: flex;
        gap: 8px;
        align-items: center;
    }

    .progress-dot {
        width: 8px;
        height: 8px;
        border-radius: 50%;
        border: 1px solid rgba(255, 255, 255, 0.3);
        background: transparent;
    }

    .progress-dot.active {
        background: var(--accent);
        border-color: var(--accent);
        box-shadow: 0 0 10px rgba(40, 209, 124, 0.8);
    }

    .progress-label {
        color: var(--text-muted);
    }

    /* ========= COST ESTIMATOR MODAL ========= */
    .cost-modal .popup-box {
        max-width: 400px;
    }

    .cost-row {
        display: flex;
        gap: 8px;
        margin-bottom: 8px;
    }

    .cost-label {
        font-size: 11px;
        margin-bottom: 4px;
        color: var(--text-muted);
    }

    .cost-select,
    .cost-input {
        width: 100%;
        padding: 8px 9px;
        border-radius: 10px;
        border: 1px solid rgba(255, 255, 255, 0.18);
        background: rgba(5, 31, 19, 0.9);
        color: var(--text-main);
        font-size: 12px;
    }

    .cost-result {
        margin-top: 6px;
        font-size: 12px;
        color: #e7fff5;
    }

    /* ========= FLOATING ASSISTANT BUBBLE ========= */
    .assistant-bubble {
        position: fixed;
        right: 18px;
        bottom: 18px;
        width: 46px;
        height: 46px;
        border-radius: 999px;
        background: radial-gradient(circle at 0 0, #28d17c, #0d7a45);
        display: flex;
        align-items: center;
        justify-content: center;
        box-shadow: 0 18px 40px rgba(0, 0, 0, 0.9);
        cursor: pointer;
        z-index: 55;
    }

    .assistant-bubble span {
        font-size: 22px;
        color: #02140b;
    }

    .assistant-panel {
        position: fixed;
        right: 18px;
        bottom: 76px;
        width: 260px;
        max-width: 90vw;
        background: #041e13;
        border-radius: 18px;
        border: 1px solid rgba(255, 255, 255, 0.18);
        box-shadow: 0 20px 50px rgba(0, 0, 0, 0.9);
        display: none;
        flex-direction: column;
        padding: 10px 10px 8px 10px;
        font-size: 11px;
        z-index: 55;
    }

    .assistant-panel-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 6px;
    }

    .assistant-panel-title {
        font-weight: 600;
    }

    .assistant-panel-body {
        max-height: 160px;
        overflow-y: auto;
        margin-bottom: 6px;
    }

    .assistant-msg {
        margin-bottom: 4px;
    }

    .assistant-msg.assistant {
        color: var(--text-muted);
    }

    .assistant-msg.user {
        color: #e7fff5;
        text-align: right;
    }

    .assistant-input-row {
        display: flex;
        gap: 6px;
    }

    .assistant-input {
        flex: 1;
        padding: 5px 7px;
        border-radius: 999px;
        border: 1px solid rgba(255, 255, 255, 0.18);
        background: rgba(5, 31, 19, 0.9);
        color: var(--text-main);
        font-size: 11px;
        outline: none;
    }

    .assistant-send-btn {
        padding: 5px 9px;
        border-radius: 999px;
        border: none;
        background: var(--accent);
        color: #02140b;
        font-size: 11px;
        cursor: pointer;
    }

    /* ========= RESPONSIVE ========= */
    @media (max-width: 980px) {
        .layout {
            grid-template-columns: 1fr;
        }
        .sidebar {
            position: static;
            max-height: none;
            order: 2;
        }
    }

    @media (max-width: 780px) {
        .hero-card {
            grid-template-columns: 1fr;
        }
        .stats-row {
            grid-template-columns: 1fr;
        }
        .contractor-grid {
            grid-template-columns: 1fr;
        }
        .topbar {
            flex-direction: column;
            align-items: flex-start;
        }
        .top-pills {
            justify-content: flex-start;
        }
    }
</style>
</head>
<body>

<!-- ========== TOP BAR ========== -->
<header class="topbar">
    <div class="brand-wrap">
        <div class="brand-logo">S</div>
        <div>
            <div class="brand-text-main">ServicePoint SA</div>
            <div class="brand-text-sub">Home &amp; Business Service Network</div>
        </div>
    </div>
    <div class="top-pills">
        <div class="pill">
            <span class="pill-dot"></span>
            Smart contractor matching
        </div>
        <div class="pill pill-accent">
            <span class="pill-dot"></span>
            Live human assistant chat
        </div>
        <div class="pill">
            <span class="pill-dot"></span>
            SA coverage Â· KZN Â· JHB Â· CPT
        </div>
    </div>
</header>

<main class="layout">
    <!-- ========== SIDEBAR ========== -->
    <aside class="sidebar">
        <div class="sidebar-header">
            Tap a category to see services.<br />
            Tap a service to request it via our human assistant.
        </div>

        <!-- SEARCH BAR -->
        <div class="service-search">
            <input
                id="serviceSearch"
                class="service-search-input"
                type="text"
                placeholder="Search across 200+ services..."
            />
            <div id="searchResults" class="search-results"></div>
        </div>

        <div class="scroll-area" id="categoryList">
            <!-- Populated by JS -->
        </div>

        <div class="sidebar-footer">
            Serving Durban, Johannesburg &amp; Cape Town with rollout to the rest
            of South Africa.
        </div>
    </aside>

    <!-- ========== MAIN CONTENT ========== -->
    <section class="content">
        <!-- HERO -->
        <section class="hero-card">
            <div>
                <div class="hero-eyebrow">Built for South African homes &amp; businesses</div>
                <h1 class="hero-title">
                    Connect with trusted contractors in KZN, JHB &amp; CPT.
                </h1>
                <p class="hero-sub">
                    One request. Verified contractors compete to give you the best
                    service. You stay in control &mdash; we handle the admin, follow-ups
                    and reminders across <strong>200+ services</strong>.
                </p>

                <div class="region-chips">
                    <div class="chip">
                        <span class="chip-dot"></span>
                        KZN &ndash; Durban &amp; surrounds
                    </div>
                    <div class="chip">
                        <span class="chip-dot"></span>
                        JHB &ndash; Johannesburg &amp; Gauteng
                    </div>
                    <div class="chip">
                        <span class="chip-dot"></span>
                        CPT &ndash; Cape Town &amp; Winelands
                    </div>
                </div>

                <div class="hero-meta">
                    <span>Average response time: &lt; 15 minutes during office hours.</span>
                    <span>We only send your details once you confirm the quote.</span>
                </div>
            </div>

            <div class="hero-right">
                <div class="hero-right-text">
                    Answer a few quick questions, pick a service and our
                    <strong>human assistant</strong> chats with you to confirm the details
                    before sending it to the best-scored contractors.
                </div>

                <div class="hero-right-cta">
                    <button class="btn-primary" onclick="openPopupFromCTA()">
                        Get matched now
                    </button>
                    <button class="btn-ghost" onclick="scrollToWhy()">
                        How it works
                    </button>
                    <button class="btn-ghost" onclick="openCostModal()">
                        Estimate cost
                    </button>
                </div>

                <div class="assistant-tag">
                    <div class="assistant-avatar"></div>
                    <span>Real people on standby if anything goes wrong on-site.</span>
                </div>
            </div>
        </section>

        <!-- EMERGENCY QUICK BUTTONS -->
        <section class="emergency-row">
            <span class="emergency-label">ðŸš¨ Emergency?</span>
            <button class="emergency-chip" onclick="openPopup('Emergency â€“ Burst pipe / major leak')">
                <span class="icon">ðŸ’§</span> Burst pipe
            </button>
            <button class="emergency-chip" onclick="openPopup('Emergency â€“ Power tripping / no power')">
                <span class="icon">âš¡</span> Power tripping
            </button>
            <button class="emergency-chip" onclick="openPopup('Emergency â€“ No hot water / geyser issue')">
                <span class="icon">ðŸ”¥</span> No hot water
            </button>
            <button class="emergency-chip" onclick="openPopup('Emergency â€“ Locked out / access issue')">
                <span class="icon">ðŸšª</span> Locked out
            </button>
            <button class="emergency-chip" onclick="openPopup('Emergency â€“ Wi-Fi / internet down')">
                <span class="icon">ðŸ“¶</span> Wi-Fi down
            </button>
        </section>

        <!-- STATS -->
        <section class="stats-row">
            <article class="stat-card">
                <div class="stat-label">Leads successfully fed</div>
                <div class="stat-value" id="statLeads">168</div>
                <div class="stat-foot">
                    Real jobs routed to verified contractors across SA.
                </div>
            </article>
            <article class="stat-card">
                <div class="stat-label">Regions covered</div>
                <div class="stat-value">3</div>
                <div class="stat-foot">
                    KZN Â· Gauteng Â· Cape Town (nationwide rollout coming soon).
                </div>
            </article>
            <article class="stat-card">
                <div class="stat-label">Average rating</div>
                <div class="stat-value">4.8â˜…</div>
                <div class="stat-foot">Based on job reviews &amp; comeback rate.</div>
            </article>
        </section>

        <!-- KPI ROW -->
        <section class="stats-row kpi-row">
            <article class="stat-card">
                <div class="stat-label">Leads today</div>
                <div class="stat-value" id="statToday">12</div>
                <div class="stat-foot">Live requests in the last 24 hours.</div>
            </article>
            <article class="stat-card">
                <div class="stat-label">This week</div>
                <div class="stat-value" id="statWeek">54</div>
                <div class="stat-foot">New jobs logged since Monday.</div>
            </article>
            <article class="stat-card">
                <div class="stat-label">Top category</div>
                <div class="stat-value" id="statTopCat">Plumbing</div>
                <div class="stat-foot">Based on total requests this week.</div>
            </article>
        </section>

        <!-- WHY CHOOSE -->
        <section id="why-section" class="why-card">
            <div>
                <h2 class="why-title">Why choose ServicePoint SA?</h2>
                <ul class="why-list">
                    <li>
                        <span class="why-bullet">âœ“</span>
                        <span>
                            We pre-vet contractors for documents, workmanship history and
                            real-world references.
                        </span>
                    </li>
                    <li>
                        <span class="why-bullet">âœ“</span>
                        <span>
                            Smart lead routing hides your number until you accept a
                            contractor.
                        </span>
                    </li>
                    <li>
                        <span class="why-bullet">âœ“</span>
                        <span>
                            Our human assistant keeps you updated in plain language &mdash;
                            not bots or call centres.
                        </span>
                    </li>
                </ul>
            </div>

            <div>
                <h2 class="why-title">How ServicePoint SA works</h2>
                <ul class="why-list">
                    <li>
                        <span class="why-bullet">1</span>
                        <span>Choose a category and tap the service you need.</span>
                    </li>
                    <li>
                        <span class="why-bullet">2</span>
                        <span>
                            Our assistant confirms the details with you.
                        </span>
                    </li>
                    <li>
                        <span class="why-bullet">3</span>
                        <span>
                            We send the job to the right pros and you pick who to book.
                        </span>
                    </li>
                </ul>
                <p class="why-foot">
                    You stay in control at every step. No spam, no mass WhatsApp groups.
                </p>
            </div>
        </section>

        <!-- FEATURED CONTRACTORS -->
        <section class="contractors-section">
            <h2 class="section-heading">Featured contractors</h2>
            <p class="section-sub">
                Examples from our network. Chat to our assistant to be matched to the best option for your area.
            </p>
            <div class="contractor-grid">
                <article class="contractor-card">
                    <div class="contractor-name">KZN Elite Plumbing</div>
                    <div class="contractor-meta">Durban Â· 4.9â˜… Â· 240+ jobs</div>
                    <div class="contractor-tags">
                        <span class="contractor-tag">Burst pipes</span>
                        <span class="contractor-tag">Geysers</span>
                        <span class="contractor-tag">Blockages</span>
                    </div>
                    <button class="contractor-btn"
                        onclick="openPopup('Contractor enquiry â€“ KZN Elite Plumbing')">
                        Request a quote
                    </button>
                </article>
                <article class="contractor-card">
                    <div class="contractor-name">Gauteng Power &amp; Solar</div>
                    <div class="contractor-meta">JHB Â· 4.8â˜… Â· 190+ jobs</div>
                    <div class="contractor-tags">
                        <span class="contractor-tag">COC &amp; compliance</span>
                        <span class="contractor-tag">Solar backup</span>
                        <span class="contractor-tag">DB upgrades</span>
                    </div>
                    <button class="contractor-btn"
                        onclick="openPopup('Contractor enquiry â€“ Gauteng Power & Solar')">
                        Request a quote
                    </button>
                </article>
                <article class="contractor-card">
                    <div class="contractor-name">Cape Build &amp; Finish</div>
                    <div class="contractor-meta">Cape Town Â· 4.7â˜… Â· 160+ jobs</div>
                    <div class="contractor-tags">
                        <span class="contractor-tag">Renovations</span>
                        <span class="contractor-tag">Tiling</span>
                        <span class="contractor-tag">Painting</span>
                    </div>
                    <button class="contractor-btn"
                        onclick="openPopup('Contractor enquiry â€“ Cape Build & Finish')">
                        Request a quote
                    </button>
                </article>
            </div>
        </section>

        <!-- REVIEWS -->
        <section class="reviews-section">
            <div class="reviews-header">
                <div>
                    <h2 class="section-heading">What clients are saying</h2>
                    <p class="section-sub">Real feedback from jobs routed through our network.</p>
                </div>
                <div class="review-nav">
                    <button class="review-btn" onclick="prevReview()">&lt;</button>
                    <button class="review-btn" onclick="nextReview()">&gt;</button>
                </div>
            </div>
            <div class="reviews-carousel">
                <div id="reviewText" class="review-text"></div>
                <div id="reviewMeta" class="review-meta"></div>
            </div>
        </section>
    </section>
</main>

<!-- ========== POPUP ========= -->
<div class="popup-bg" id="popup">
    <div class="popup-box">
        <h3 class="popup-title">Request this service</h3>
        <p class="popup-sub">
            Our human assistant will confirm your details and match you to the
            right contractor.
        </p>

        <div class="popup-selected">
            <span class="tag"></span>
            <span id="selectedService">General service</span>
        </div>

        <input
            id="clientName"
            class="popup-input"
            type="text"
            placeholder="Your full name"
        />
        <input
            id="clientPhone"
            class="popup-input"
            type="text"
            placeholder="Best contact number"
        />

        <div class="popup-row">
            <button class="btn-secondary" onclick="closePopup()">Cancel</button>
            <button class="btn-primary" onclick="sendLead()">Send request</button>
        </div>

        <div class="popup-footnote">
            By sending a request you agree for us to contact you about this job.
        </div>
    </div>
</div>

<!-- ========== COST ESTIMATOR MODAL ========= -->
<div class="popup-bg cost-modal" id="costModal">
    <div class="popup-box">
        <h3 class="popup-title">Quick cost estimate</h3>
        <p class="popup-sub">
            Get a rough price range before you submit your request. Final quotes
            depend on site conditions.
        </p>

        <div class="cost-row">
            <div style="flex:1;">
                <div class="cost-label">Category</div>
                <select id="costCategory" class="cost-select">
                    <option value="Plumbing">Plumbing</option>
                    <option value="Electrical">Electrical</option>
                    <option value="Painting">Painting</option>
                    <option value="Renovation">Renovation</option>
                    <option value="Solar">Solar / Backup</option>
                </select>
            </div>
            <div style="flex:1;">
                <div class="cost-label">Job size</div>
                <select id="costSize" class="cost-select">
                    <option value="small">Small</option>
                    <option value="medium">Medium</option>
                    <option value="large">Large</option>
                </select>
            </div>
        </div>

        <div class="cost-row">
            <div style="flex:1;">
                <div class="cost-label">Urgency</div>
                <select id="costUrgency" class="cost-select">
                    <option value="normal">Within a week</option>
                    <option value="soon">Next 48 hours</option>
                    <option value="emergency">Emergency today</option>
                </select>
            </div>
            <div style="flex:1;">
                <div class="cost-label">Rough budget (optional)</div>
                <input id="costBudget" class="cost-input" type="number" placeholder="e.g. 2500" />
            </div>
        </div>

        <div class="popup-row">
            <button class="btn-secondary" onclick="closeCostModal()">Close</button>
            <button class="btn-primary" onclick="calculateEstimate()">Calculate</button>
        </div>

        <div id="costResult" class="cost-result"></div>
    </div>
</div>

<!-- ========== PROGRESS TRACKER ========= -->
<div id="progressTracker" class="progress-tracker">
    <div class="progress-step-wrap">
        <div class="progress-dot" data-step="1"></div>
        <span class="progress-label">Confirming details</span>
    </div>
    <div class="progress-step-wrap">
        <div class="progress-dot" data-step="2"></div>
        <span class="progress-label">Routing to contractors</span>
    </div>
    <div class="progress-step-wrap">
        <div class="progress-dot" data-step="3"></div>
        <span class="progress-label">Preparing quotes</span>
    </div>
</div>

<!-- ========== FLOATING ASSISTANT ========= -->
<div class="assistant-panel" id="assistantPanel">
    <div class="assistant-panel-header">
        <span class="assistant-panel-title">ServicePoint assistant</span>
        <button class="btn-secondary" style="padding:2px 6px;font-size:10px;" onclick="toggleAssistantPanel()">Ã—</button>
    </div>
    <div id="assistantBody" class="assistant-panel-body">
        <div class="assistant-msg assistant">
            Hi ðŸ‘‹&nbsp;Tell me what you need and Iâ€™ll help you pick the best service.
        </div>
    </div>
    <div class="assistant-input-row">
        <input
            id="assistantInput"
            class="assistant-input"
            type="text"
            placeholder="e.g. Need someone to fix a burst pipe"
            onkeydown="assistantKeyDown(event)"
        />
        <button class="assistant-send-btn" onclick="sendAssistantMessage()">Send</button>
    </div>
</div>

<div class="assistant-bubble" onclick="toggleAssistantPanel()">
    <span>ðŸ’¬</span>
</div>

<script>
/* =========================================
   CATEGORY + SERVICE DATA (200+ SERVICES)
   ========================================= */
const categories = {
  "Solar & Backup Power": [
    "Full solar system design",
    "Inverter + battery installation",
    "Solar geyser conversion",
    "Load-shedding backup kits",
    "Solar COC & compliance",
    "Commercial solar audit",
    "Solar panel cleaning",
    "Off-grid farm solutions"
  ],
  "Electrical": [
    "New plug & light points",
    "DB board upgrade",
    "Full house re-wiring",
    "Pre-paid meter installation",
    "Fault finding & tripping power",
    "Certificate of Compliance (COC)",
    "Generator change-over",
    "Surge protection install"
  ],
  "Plumbing & Geysers": [
    "Burst pipe repair",
    "Geyser replacement",
    "Blocked drain & sewer",
    "Bathroom renovation plumbing",
    "Leak detection report",
    "Kitchen plumbing upgrade",
    "Septic tank & French drain",
    "Rainwater tank connection"
  ],
  "HVAC & Refrigeration": [
    "Aircon supply & install",
    "Aircon service & regas",
    "Cold room repair",
    "Ventilation & extraction fans",
    "Office HVAC maintenance",
    "Server-room cooling",
    "Underfloor heating",
    "Commercial fridge repair"
  ],
  "Security, CCTV & Access": [
    "CCTV camera installation",
    "Alarm system install & service",
    "Electric fence repair",
    "Gate motor replacement",
    "Intercom & access control",
    "Remote viewing setup",
    "Perimeter beams",
    "Security lighting projects"
  ],
  "Roofing & Waterproofing": [
    "Leak detection & repair",
    "Roof tile replacement",
    "IBR / corrugated roof install",
    "Torch-on waterproofing",
    "Gutter replacement",
    "Ceiling board repair",
    "Roof cleaning & painting",
    "Skylight installation"
  ],
  "Painting & Decorating": [
    "Interior repaint",
    "Exterior repaint",
    "Roof painting",
    "Feature wall & decor",
    "Damp proofing",
    "Complex & body corporate repaint",
    "Industrial painting",
    "Varnish & wood treatment"
  ],
  "Carpentry & Joinery": [
    "New kitchen cupboards",
    "Built-in bedroom cupboards",
    "Shopfitting & counters",
    "Decking supply & install",
    "Timber pergolas",
    "Custom furniture build",
    "Door hanging & frames",
    "Wooden window repair"
  ],
  "Flooring & Tiling": [
    "Porcelain & ceramic tiling",
    "Vinyl flooring",
    "Laminate flooring",
    "Carpet supply & fit",
    "Screeding & self-levelling",
    "Timber / parquet flooring",
    "Bathroom & shower tiling",
    "Commercial flooring upgrade"
  ],
  "Landscaping & Gardens": [
    "Garden design & makeover",
    "Instant lawn & roll-on grass",
    "Tree felling & trimming",
    "Irrigation system install",
    "Artificial turf",
    "Outdoor lighting",
    "Complex garden maintenance",
    "Pool area revamp"
  ],
  "Cleaning Services": [
    "Deep cleaning â€“ home",
    "Post-construction clean",
    "Office & commercial cleaning",
    "Carpet & upholstery cleaning",
    "Window cleaning (multi-storey)",
    "Move-in / move-out clean",
    "Short-let & Airbnb clean",
    "Industrial warehouse cleaning"
  ],
  "Appliance & Electronics Repair": [
    "Washing machine repair",
    "Fridge & freezer repair",
    "Dishwasher repair",
    "TV & home-theatre setup",
    "Oven & hob repair",
    "Tumble-dryer repair",
    "Microwave repair",
    "Bar fridge & ice-maker"
  ],
  "Windows, Doors & Glass": [
    "Aluminium window installation",
    "Stacking / sliding doors",
    "Garage door supply & fit",
    "Wooden door refurbishment",
    "Shower glass & enclosures",
    "Burglar bars & security gates",
    "Glazing & glass replacement",
    "Automatic doors"
  ],
  "Walls, Fencing & Paving": [
    "Boundary wall build",
    "Vibracrete walling",
    "Palisade fencing",
    "Clear-view fencing",
    "Driveway paving",
    "Retaining wall engineering",
    "Complex perimeter upgrades",
    "Wall repairs & crack stitching"
  ],
  "Pools & Water Features": [
    "New pool build",
    "Fibreglass relining",
    "Pool leak detection",
    "Salt-chlorinator install",
    "Pump & filter replacement",
    "Solar pool heating",
    "Koi pond build",
    "Jacuzzi & spa maintenance"
  ],
  "Pest Control": [
    "Cockroach & ant treatment",
    "Termite & wood borer",
    "Rodent control",
    "Flea & bedbug treatment",
    "Bird proofing",
    "Industrial fumigation",
    "Restaurant pest programme",
    "Pre-construction soil poisoning"
  ],
  "IT, Wi-Fi & Smart Home": [
    "Fibre & Wi-Fi setup",
    "Whole-home Wi-Fi mesh",
    "Network cabling & racks",
    "Smart home automation",
    "VOIP & IP phones",
    "Smart lighting & scenes",
    "Home cinema room",
    "Computer support â€“ small business"
  ],
  "Photography & Media": [
    "Brand & campaign shoots",
    "Event photography",
    "Real-estate & Airbnb photos",
    "Product photography",
    "Studio & portrait session",
    "Video content creation",
    "Drone photo / video",
    "Social media content day"
  ],
  "Graphic, Web & Branding": [
    "Logo & brand identity",
    "Business cards & stationery",
    "Website design & build",
    "E-commerce store setup",
    "Social media templates",
    "Vehicle & shop signage",
    "Brochures & catalogues",
    "Rebrand strategy session"
  ],
  "Events, Catering & DÃ©cor": [
    "Birthday & private events",
    "Corporate event management",
    "Catering â€“ platters & buffets",
    "Wedding planning",
    "Marquee & stretch tents",
    "Sound, stage & lighting",
    "Event dÃ©cor & flowers",
    "Photobooth & media wall"
  ],
  "Fitness & Personal Training": [
    "Home personal training",
    "Gym-based personal training",
    "Online coaching plan",
    "Boot-camp classes",
    "Nutrition guidance",
    "Weight-loss programme",
    "Strength & conditioning",
    "Pre- & post-natal training"
  ],
  "Sports Coaching": [
    "Kids soccer coaching",
    "Rugby skills coaching",
    "Cricket nets & coaching",
    "Swimming lessons",
    "Tennis coaching",
    "Running & athletics coaching",
    "High-performance coaching",
    "School holiday sports clinics"
  ],
  "Beauty, Hair & Wellness": [
    "Mobile hairdresser",
    "Make-up artist",
    "Nails & mani-pedi",
    "Massage therapist (mobile)",
    "Aesthetic skincare treatments",
    "Barber & grooming",
    "Bridal beauty package",
    "Lash & brow services"
  ],
  "Childcare & Tutors": [
    "Au pair / nanny placement",
    "Homework & study tutor",
    "Matric exam prep",
    "Coding & robotics classes",
    "Music & piano lessons",
    "Homeschool support",
    "Special-needs support",
    "After-care programme"
  ],
  "Transport & Moving": [
    "Local home move",
    "Office relocation",
    "Mini moves & bakkie hire",
    "Furniture removals",
    "Courier & same-day delivery",
    "Cross-border moves",
    "Packing & boxes",
    "Piano & heavy-item moves"
  ],
  "Real Estate & Property": [
    "Sales agent â€“ list my property",
    "Rental agent â€“ manage my unit",
    "Snag list & handover report",
    "Home inspection report",
    "Eviction & legal advisory (referral)",
    "Body corporate maintenance plan",
    "Short-let / Airbnb management",
    "Property photography + listing setup"
  ],
  "Business Services": [
    "Bookkeeping & monthly accounts",
    "Tax returns & SARS help",
    "Payroll setup",
    "HR & labour consulting",
    "Business coaching",
    "Tender & RFQ assistance",
    "CIPC registrations",
    "POS & payment systems"
  ],
  "Auto Services": [
    "Mobile mechanic",
    "Major car service",
    "Auto electrical",
    "Tyres & wheel alignment",
    "Panel beating & spray painting",
    "Car valet & detailing",
    "Tow-in service",
    "Sound & tracking system install"
  ]
};

const categoryListEl = document.getElementById("categoryList");

Object.keys(categories).forEach((categoryName) => {
    const services = categories[categoryName];

    const category = document.createElement("div");
    category.className = "category";

    const header = document.createElement("div");
    header.className = "category-header";

    const titleWrap = document.createElement("div");
    titleWrap.className = "category-title";

    const icon = document.createElement("span");
    icon.className = "category-icon";

    const title = document.createElement("span");
    title.textContent = categoryName;

    titleWrap.appendChild(icon);
    titleWrap.appendChild(title);

    const rightWrap = document.createElement("div");
    rightWrap.style.display = "flex";
    rightWrap.style.alignItems = "center";
    rightWrap.style.gap = "6px";

    const count = document.createElement("span");
    count.className = "category-count";
    count.textContent = services.length + " services";

    const arrow = document.createElement("span");
    arrow.className = "category-arrow";
    arrow.textContent = "â–¾";

    rightWrap.appendChild(count);
    rightWrap.appendChild(arrow);

    header.appendChild(titleWrap);
    header.appendChild(rightWrap);

    const list = document.createElement("div");
    list.className = "service-list";

    services.forEach((serviceName) => {
        const item = document.createElement("button");
        item.type = "button";
        item.className = "service-item";
        item.onclick = () => openPopup(`${categoryName} â€“ ${serviceName}`);

        const dot = document.createElement("span");
        dot.className = "service-dot";

        const label = document.createElement("span");
        label.textContent = serviceName;

        item.appendChild(dot);
        item.appendChild(label);
        list.appendChild(item);
    });

    header.onclick = () => {
        const isOpen = list.style.display === "block";
        list.style.display = isOpen ? "none" : "block";
        arrow.textContent = isOpen ? "â–¾" : "â–´";
    };

    category.appendChild(header);
    category.appendChild(list);
    categoryListEl.appendChild(category);
});

/* =========================================
   SERVICE SEARCH (AUTO-COMPLETE)
   ========================================= */
const searchInput = document.getElementById("serviceSearch");
const searchResults = document.getElementById("searchResults");

const allServices = [];
Object.keys(categories).forEach((categoryName) => {
    categories[categoryName].forEach((serviceName) => {
        allServices.push({
            category: categoryName,
            service: serviceName
        });
    });
});

searchInput.addEventListener("input", () => {
    const q = searchInput.value.trim().toLowerCase();
    if (!q) {
        searchResults.style.display = "none";
        searchResults.innerHTML = "";
        return;
    }

    const matches = allServices.filter(entry =>
        entry.service.toLowerCase().includes(q) ||
        entry.category.toLowerCase().includes(q)
    ).slice(0, 20);

    if (!matches.length) {
        searchResults.style.display = "none";
        searchResults.innerHTML = "";
        return;
    }

    searchResults.innerHTML = "";
    matches.forEach(entry => {
        const div = document.createElement("div");
        div.className = "search-result-item";
        div.onclick = () => {
            openPopup(`${entry.category} â€“ ${entry.service}`);
            searchResults.style.display = "none";
        };

        const label = document.createElement("span");
        label.className = "label";
        label.textContent = entry.service;

        const cat = document.createElement("span");
        cat.className = "cat";
        cat.textContent = entry.category;

        div.appendChild(label);
        div.appendChild(cat);
        searchResults.appendChild(div);
    });

    searchResults.style.display = "block";
});

document.addEventListener("click", (e) => {
    if (!searchResults.contains(e.target) && e.target !== searchInput) {
        searchResults.style.display = "none";
    }
});

/* =========================================
   POPUP + LEAD SEND + PROGRESS TRACKER
   ========================================= */
const popupEl = document.getElementById("popup");
const selectedServiceEl = document.getElementById("selectedService");
const progressEl = document.getElementById("progressTracker");
let progressTimer = null;

function openPopup(serviceName) {
    selectedServiceEl.textContent = serviceName;
    popupEl.style.display = "flex";
}

function openPopupFromCTA() {
    openPopup("General service request");
}

function closePopup() {
    popupEl.style.display = "none";
}

function scrollToWhy() {
    const el = document.getElementById("why-section");
    if (!el) return;
    el.scrollIntoView({ behavior: "smooth", block: "start" });
}

function setProgressStep(step) {
    const dots = progressEl.querySelectorAll(".progress-dot");
    dots.forEach(dot => {
        const s = parseInt(dot.getAttribute("data-step"), 10);
        if (s <= step) {
            dot.classList.add("active");
        } else {
            dot.classList.remove("active");
        }
    });
}

function startProgress() {
    progressEl.style.display = "flex";
    setProgressStep(1);

    if (progressTimer) clearTimeout(progressTimer);

    progressTimer = setTimeout(() => {
        setProgressStep(2);
        progressTimer = setTimeout(() => {
            setProgressStep(3);
        }, 1800);
    }, 1600);
}

function stopProgress() {
    if (progressTimer) clearTimeout(progressTimer);
    progressTimer = null;
    setTimeout(() => {
        progressEl.style.display = "none";
        setProgressStep(1);
    }, 900);
}

function sendLead() {
    const name = document.getElementById("clientName").value.trim();
    const phone = document.getElementById("clientPhone").value.trim();
    const service = selectedServiceEl.textContent.trim();

    if (!name || !phone) {
        alert("Please fill in your name and contact number.");
        return;
    }

    startProgress();

    // TODO: add your own Telegram bot token + chat ID here
    const botToken = "YOUR_TELEGRAM_BOT_TOKEN";
    const chatId = "YOUR_CHAT_ID";

    const msg = `ðŸ”¥ *New Service Lead*
ðŸ“Œ Service: ${service}
ðŸ‘¤ Name: ${name}
ðŸ“± Phone: ${phone}`;

    fetch(
        `https://api.telegram.org/bot${botToken}/sendMessage?chat_id=${chatId}` +
            `&text=${encodeURIComponent(msg)}&parse_mode=Markdown`
    )
        .then(() => {
            alert(
                "Thanks! Our human assistant will contact you shortly to confirm the details."
            );
            closePopup();
            document.getElementById("clientName").value = "";
            document.getElementById("clientPhone").value = "";
        })
        .catch(() => {
            alert(
                "We couldn't reach our assistant right now. Please try again in a moment."
            );
        })
        .finally(() => {
            stopProgress();
        });
}

/* =========================================
   REVIEWS CAROUSEL
   ========================================= */
const reviews = [
    {
        text: "â€œServicePoint SA sorted out a burst pipe at 9pm. The plumber was professional and the assistant kept me updated the whole time.â€",
        meta: "â€“ Thandi, Durban Â· Emergency plumbing",
        stars: 5
    },
    {
        text: "â€œGot three quotes for a painting job within a day. Chose the best one and everything was handled through WhatsApp with their assistant.â€",
        meta: "â€“ Jason, Johannesburg Â· Interior repaint",
        stars: 5
    },
    {
        text: "â€œThey connected us with a solar contractor who understood our budget and explained everything clearly. Highly recommended.â€",
        meta: "â€“ Ayesha, Cape Town Â· Solar backup",
        stars: 4
    },
    {
        text: "â€œQuick, simple and no spam calls. Submitted once, picked my contractor and the job was done within 48 hours.â€",
        meta: "â€“ Kabelo, Pietermaritzburg Â· Electrical fault",
        stars: 5
    }
];

let reviewIndex = 0;
const reviewTextEl = document.getElementById("reviewText");
const reviewMetaEl = document.getElementById("reviewMeta");

function renderReview() {
    const r = reviews[reviewIndex];
    const stars = "â˜…".repeat(r.stars) + "â˜†".repeat(5 - r.stars);
    reviewTextEl.innerHTML = `<span class="review-stars">${stars}</span>${r.text}`;
    reviewMetaEl.textContent = r.meta;
}

function nextReview() {
    reviewIndex = (reviewIndex + 1) % reviews.length;
    renderReview();
}

function prevReview() {
    reviewIndex = (reviewIndex - 1 + reviews.length) % reviews.length;
    renderReview();
}

renderReview();

/* =========================================
   COST ESTIMATOR
   ========================================= */
const costModal = document.getElementById("costModal");

function openCostModal() {
    costModal.style.display = "flex";
}

function closeCostModal() {
    costModal.style.display = "none";
}

function calculateEstimate() {
    const category = document.getElementById("costCategory").value;
    const size = document.getElementById("costSize").value;
    const urgency = document.getElementById("costUrgency").value;
    const budget = document.getElementById("costBudget").value.trim();
    const resultEl = document.getElementById("costResult");

    let baseMin = 500;
    let baseMax = 1500;

    if (category === "Plumbing") { baseMin = 800; baseMax = 3000; }
    if (category === "Electrical") { baseMin = 700; baseMax = 2800; }
    if (category === "Painting") { baseMin = 1500; baseMax = 6000; }
    if (category === "Renovation") { baseMin = 5000; baseMax = 30000; }
    if (category === "Solar") { baseMin = 8000; baseMax = 80000; }

    if (size === "medium") {
        baseMin *= 1.5;
        baseMax *= 1.7;
    } else if (size === "large") {
        baseMin *= 2.2;
        baseMax *= 3;
    }

    if (urgency === "soon") {
        baseMin *= 1.1;
        baseMax *= 1.2;
    } else if (urgency === "emergency") {
        baseMin *= 1.3;
        baseMax *= 1.4;
    }

    const formattedMin = Math.round(baseMin / 100) * 100;
    const formattedMax = Math.round(baseMax / 100) * 100;

    let text = `For ${size} ${category.toLowerCase()} (${urgency}), typical jobs range between Â±R${formattedMin.toLocaleString()} and R${formattedMax.toLocaleString()}.`;
    if (budget) {
        text += ` Based on your rough budget of R${Number(budget).toLocaleString()}, our assistant will try match you with the best fit.`;
    }

    resultEl.textContent = text;
}

/* =========================================
   FLOATING ASSISTANT (FRONT-END ONLY)
   ========================================= */
const assistantPanel = document.getElementById("assistantPanel");
const assistantBody = document.getElementById("assistantBody");
const assistantInput = document.getElementById("assistantInput");

function toggleAssistantPanel() {
    const isOpen = assistantPanel.style.display === "flex";
    assistantPanel.style.display = isOpen ? "none" : "flex";
}

function sendAssistantMessage() {
    const text = assistantInput.value.trim();
    if (!text) return;

    const userMsg = document.createElement("div");
    userMsg.className = "assistant-msg user";
    userMsg.textContent = text;
    assistantBody.appendChild(userMsg);

    assistantInput.value = "";

    const reply = document.createElement("div");
    reply.className = "assistant-msg assistant";
    reply.textContent =
        "Thanks! For the fastest response, pick the closest service on the left or tell me your suburb and Iâ€™ll suggest a category.";
    assistantBody.appendChild(reply);

    assistantBody.scrollTop = assistantBody.scrollHeight;
}

function assistantKeyDown(e) {
    if (e.key === "Enter") {
        e.preventDefault();
        sendAssistantMessage();
    }
}
</script>
</body>
</html>
